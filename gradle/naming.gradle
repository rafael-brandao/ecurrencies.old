ext {
	groupId = groupId(project)
	artifactId = artifactId(project)
}

afterEvaluate { group = groupId }

def groupPrefix() { "com.devsoftbr.${rootProject.name}" }

def nameFor(project, closure) {
	List names = [project.name]
	while(project != rootProject) {
		project = project.parent
		names += project.name
	}
	closure(names)
}

def groupId(project) {
	nameFor(project) { names ->
		def size = names.size
		switch(size) {
			case {it == 1 || it == 2}  : return groupPrefix()
			default : return "${groupPrefix()}.${names[1]}"
		}
	}
}

def artifactId(project){
	nameFor(project) { names ->
		def size = names.size
		switch(size) {
			case 1  : return names[0]
			case 2  : return names.reverse().join('-')
			case 3  : return names[0..1].join('-')
			default : return names[0..1].reverse().join('-')
		}
	}
}