ext {
    groupId = groupId(project)
    artifactId = artifactId(project)
}

afterEvaluate {
    group = groupId
}

def groupId(project){
    def groupIdPrefix = "com.devsoftbr.${rootProject.name}"
    if(project == rootProject){
        groupIdPrefix
    }
    else{
        while(project.parent != rootProject) {
            project = project.parent
        }
        "${groupIdPrefix}.${project.name}"
    }
}

def artifactId(project){
    if(project == rootProject){
        return rootProject.name
    }
    String artifactId = ""
    List names = [project.name]
    while(project.parent != rootProject){
        names += "-"
        project = project.parent
        names += project.name
    }
    names.reverse()
    if(names.size <= 3)
        names.each {artifactId += it}
    else {
        names[-3..-1].each {artifactId += it}
        names[0..-4].reverse().each {artifactId += it}
    }
    artifactId
}